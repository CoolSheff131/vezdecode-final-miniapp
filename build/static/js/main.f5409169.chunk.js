(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{144:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(17),i=n.n(r),s=n(8),u=n.n(s),j=n(15),o=n(18),l=n(9),b=n(6),h=(n(143),n(31)),O=n(30),f=(n(144),n(4)),d=function(e){var t=e.id,n=(e.go,e.fetchedUser),c=a.a.useState(""),r=Object(l.a)(c,2),i=r[0],s=r[1],d=a.a.useState([]),p=Object(l.a)(d,2),x=p[0],g=p[1],m=a.a.useState(null),v=Object(l.a)(m,2),k=v[0],S=v[1],y=a.a.useState(null),w=Object(l.a)(y,2),U=w[0],_=w[1],C=a.a.useState(null),A=Object(l.a)(C,2),E=A[0],K=A[1],V=a.a.useState(!0),W=Object(l.a)(V,2),I=W[0],B=W[1];a.a.useEffect((function(){if(null===k)return _(null);var e=new FileReader;e.onload=function(e){_(e.target.result)},e.readAsDataURL(k)}),[k]);var F=function(){var e=Object(o.a)(Object(j.a)().mark((function e(t){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=7;break}return e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.blob();case 6:t=e.sent;case 7:S(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(b.i,{id:t,children:Object(f.jsx)(b.g,{children:Object(f.jsxs)(b.e,{children:[Object(f.jsxs)(b.e,{children:[Object(f.jsx)(b.f,{top:"\u0422\u0435\u043a\u0441\u0442 \u0430\u0432\u0442\u043e\u0433\u0440\u0430\u0444\u0430",children:Object(f.jsx)(b.h,{type:"text",value:i,onChange:function(e){s(e.target.value)},disabled:!1})}),!(E&&I)&&Object(f.jsx)(b.c,{onClick:function(){return K(!E)},children:E?"\u0425\u043e\u0447\u0443 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435":"\u0425\u043e\u0447\u0443 \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u0430\u0432\u0442\u043e\u0433\u0440\u0430\u0444"}),E?Object(f.jsx)(O.a,{width:1024,height:768,color:"#fff",active:I,thickness:5,useEraser:!1,image:U,onSave:function(e){return F(e)},children:Object(f.jsx)("div",{className:"canvas-inner"})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{type:"file",onChange:function(e){S(e.target.files[0])}}),U&&Object(f.jsx)("img",{src:U})]}),E&&Object(f.jsx)(b.c,{onClick:function(){return B(!I)},children:I?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u0433\u0440\u0430\u0444":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u0433\u0440\u0430\u0444"}),!(E&&I)&&Object(f.jsx)(b.c,{onClick:function(){var e={text:i,author:n,file:k,imageUrl:U};g([].concat(Object(h.a)(x),[e])),s(""),S(null)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"})]}),Object(f.jsx)(b.e,{children:x.map((function(e,t){return Object(f.jsxs)(b.e,{children:[e.author&&Object(f.jsxs)(b.e,{children:[e.author.first_name," ",e.author.last_name]}),Object(f.jsx)("div",{children:e.text}),e.imageUrl&&Object(f.jsx)("img",{src:e.imageUrl}),Object(f.jsx)(b.c,{onClick:function(){return function(e){u.a.send("VKWebAppShowStoryBox",{background_type:"image",url:e.imageUrl,stickers:[{sticker_type:"native",sticker:{action_type:"text",action:{text:"".concat(e.author.first_name," ").concat(e.author.last_name," ").concat(e.text)}}}]})}(e)},children:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"})]},t)}))})]})})})},p=function(){var e=Object(c.useState)("bright_light"),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("home"),i=Object(l.a)(r,2),s=i[0],h=i[1],O=Object(c.useState)(null),p=Object(l.a)(O,2),x=p[0],g=p[1],m=Object(c.useState)(Object(f.jsx)(b.j,{size:"large"})),v=Object(l.a)(m,2),k=v[0],S=v[1];Object(c.useEffect)((function(){function e(){return(e=Object(o.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,g(t),S(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.subscribe((function(e){var t=e.detail,n=t.type,c=t.data;"VKWebAppUpdateConfig"===n&&a(c.scheme)})),function(){e.apply(this,arguments)}()}),[]);return Object(f.jsx)(b.d,{scheme:n,children:Object(f.jsx)(b.a,{children:Object(f.jsx)(b.b,{children:Object(f.jsx)(b.l,{popout:k,children:Object(f.jsx)(b.k,{children:Object(f.jsx)(b.m,{activePanel:s,children:Object(f.jsx)(d,{id:"home",fetchedUser:x,go:function(e){h(e.currentTarget.dataset.to)}})})})})})})})};u.a.send("VKWebAppInit"),i.a.render(Object(f.jsx)(p,{}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.f5409169.chunk.js.map